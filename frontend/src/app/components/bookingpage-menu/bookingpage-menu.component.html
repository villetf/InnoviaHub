<nav aria-label="Resurstyper" class="mb-5">
  <div class="hidden md:flex flex-wrap">
    <button
      *ngFor="let t of types; let i = index; let last = last"
      type="button"
      role="tab"
      [attr.aria-selected]="t.id === selectedTypeId"
      (click)="onSelectType(t.id)"
      class="inline-flex items-center gap-1 px-4 py-4 text mx-1 transition border bg-highlight text-[#993f3b]"
      [ngClass]="{
        'rounded-l-[30px] rounded-r-[6px] text-primary-dark-alt border-highlight mx-1 hover:bg-highlight/70':
          i === 0 && t.id !== selectedTypeId,
        'rounded-r-[30px] rounded-l-[6px] text-primary-dark-alt border-highlight mx-1 hover:bg-highlight/70':
          last && t.id !== selectedTypeId,
        'bg-primary-dark text-white border-primary-dark shadow-sm rounded-full':
          t.id === selectedTypeId,
        'text-primary-dark-alt border-highlight rounded-md mx-1 hover:bg-highlight/70':
          t.id !== selectedTypeId && i !== 0 && !last
      }"
    >
      <span>{{ t.name }}</span>
      <span
        class="rounded-full px-2 py-0.5 text-xs border"
        [ngClass]="
          t.id === selectedTypeId
            ? 'border-white/40 text-white bg-white/10'
            : 'border-border text-text bg-white/70'
        "
      >
        {{ t.countAvailable }}/{{ t.countAll }}
      </span>
    </button>
    
    <app-ai-view class="ml-auto flex items-center"></app-ai-view>
  </div>

  <!-- Mobil: CARDS -->
  <div
    class="grid gap-2 h-[calc(100vh-32px-var(--menubar-mobile-height)-var(--page-margin-mobile)*2)] mb-16 md:hidden"
  >
    <button
      *ngFor="let t of types"
      type="button"
      (click)="onSelectType(t.id)"
      class="flex items-center gap-3 rounded-xl border p-3 text-left transition bg-white shadow-sm"
      [ngClass]="
        t.id === selectedTypeId
          ? 'ring-2 ring-primary border-primary'
          : 'border-border hover:bg-bg-alt'
      "
    >
      <span class="text-xl" aria-hidden="true"></span>
      <span class="font-semibold text-heading">{{ t.name }}</span>
      <span
        class="ml-auto inline-flex items-center rounded-full px-2 py-0.5 text-xs border"
        [ngClass]="
          t.id === selectedTypeId
            ? 'border-primary text-primary'
            : 'border-border text-text'
        "
      >
        {{ t.countAvailable }}/{{ t.countAll }}
      </span>
    </button>
  </div>
</nav>
